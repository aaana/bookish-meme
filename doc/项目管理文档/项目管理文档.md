# 项目管理文档
# Content
- [项目人员](#项目人员)
- [项目计划](#项目计划)
- [项目分工说明](#项目分工说明)
- [项目会议](#项目会议)
- [项目总结](#项目总结)
- [项目完成情况](#项目完成情况)

## 项目人员

- 黄安娜 1352875 [aaana](https://github.com/aaana)
- 谭靖儒 1352892 [tztztztztz](https://github.com/tztztztztz)
- 马致远 1352923 [maerye](https://github.com/maerye)
- 林昌盛 1352965 [apelyn](https://github.com/apelyn)
- 晁佳欢 1352991 [wlmxjm1](https://github.com/wlmxjm1)

## 项目计划
项目工作量估计 ＝ 5人*2周 ＝ 10人周

### 项目计划表
|主要任务|工作描述|工作量|
|:----:|:----:|:----:|
|项目准备阶段|1. 进行项目需求分析,明确项目类型,制定项目计划2. 确定开发环境3. 熟悉基本git操作4. 寻找候选可复用构件及框架|1人周| 
|项目深度分析|项目架构分析、数据流分析|1人周|
|configuration模块和数据库模块|1. 使用json进行服务器相关参数的配置2. 使用轻量级数据库sqlite搭建数据库|1人周|
|UI模块|使用javafx技术进行UI开发|1.5人周|
|channel handler|netty管线中各模块handler的编写(json解析,authority,channelManager,limiter,logging,responser等模块)|2人周|
|测试阶段|Junit单元测试,集成测试和功能测试|1.5人周|
|文档编写阶段|程序文档,管理文档和复用文档|2人周|

## 项目分工说明
每次讨论时：
- 1.检查上次任务完成情况并进行评审
- 2.确定本次任务分工
- 3.轮流会议记录并更新项目管理文档

##项目会议
- [第一次讨论](#第一次讨论)
- [第二次讨论](#第二次讨论)
- [第三次讨论](#第三次讨论)
- [第四次讨论](#第四次讨论)
- [第五次讨论](#第五次讨论)
- [第六次讨论](#第六次讨论)
- [第七次讨论](#第七次讨论)
- [第八次讨论](#第八次讨论)
- [第九次讨论](#第九次讨论)
- [第十次讨论](#第十次讨论)
- [第十一次讨论](#第十一次讨论)
- [第十二次讨论](#第十二次讨论)

### 第一次讨论
- 时间: 3月16日 19:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼4楼
- 讨论内容
	- [项目分析](#项目分析)
	- [开发环境搭建](#开发环境搭建)
	- [基本Git操作](#基本Git操作)
	- [要使用到的一些框架与技术](#要使用到的一些框架与技术)
	- [任务分配1](#任务分配1)
	
#### 项目分析
    1. 客户端与服务端之间能够传递复杂的数据结构
    2. 服务端能够维持所有的链接
    3. 客户端需要一个界面来进行登录，发送消息等功能
    4. 需要有数据库来储存用户的账户信息
    5. 需要配置模块
    6. 需要定时写文件功能（日志）
    7. 可靠性问题
    8. heart beat
    9. 发包重复问题
    10. 能够处理limit问题

#### 开发环境搭建
	1. 需要使用java
	2. 统一IDE，使用Intellj IDEA
	3. 包管理工具使用Maven
	4. 使用Git来完成协同工作

#### 基本Git操作
	1. 知道如何clone
	2. 会创建分支，能够在branch上完成任务
	3. 在完成之后能够merge到master到，并且合适的处理conflict

#### 要使用到的一些框架与技术
	1. socket框架使用Netty
	2. 日志使用Log4j
	3. 事件机制使用EventBus
	4. json与对象转换使用Gson
	5. 数据库使用sqlite

#### 任务分配1
	- 黄安娜 > configuration
	- 晁佳欢 > database
	- 谭靖儒 > netty log，搭建项目的基本框架
	- 马致远 > json rateLimiter
	- 林昌盛 > 前端界面

### 第二次讨论

- 时间: 3月20日 20:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼苹果俱乐部
- 讨论内容
	- [项目架构分析](#项目架构分析)
	- [数据流分析](#数据流分析)
	- [协议的统一](#协议的统一)
	- [任务分配2](#任务分配2)
	
#### 项目架构分析
![architecture](https://raw.githubusercontent.com/tztztztztz/bookish-meme/master/doc/architecture.png)
#### 数据流分析
[数据流图](#ddd)
#### 协议的统一
[协议](#ddd)
#### 任务分配2
	- 黄安娜 > 完成配置模块，并且与数据库完成交互以及权限模块
	- 晁佳欢 > 完成数据库模块以及权限模块
	- 谭靖儒 > 实现Responser模块和日志模块
	- 马致远 > 完成json解析模块和rateLimiter模块
	- 林昌盛 > 前端界面

### 第三次讨论
- 时间: 3月23日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [各个模块之间集成测试](#各个模块之间集成测试)
	- [任务分配3](#任务分配3)

#### 任务分配3
	- 黄安娜 > 设计单元测试用例
	- 晁佳欢 > 设计单元测试用例
	- 谭靖儒 > 修复本阶段基本功能测试发现的bug
	- 马致远 > 修复本阶段基本功能测试发现的bug
	- 林昌盛 > 前端界面

#### 各个模块之间集成测试

简单地将大家这几天各自的做得模块组合在一起进行一些基本功能的测试

### 第四次讨论
- 时间: 3月27日 20:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: apple club
- 讨论内容
	- [单元测试](#单元测试)
	- [集成测试](#集成测试)
	- [前后端交互](#前后端交互)
	- [任务分配4](#任务分配4)
	
#### 任务分配4
	- 黄安娜 > 完成配置模块单元测试以及服务端的JsonToObjectHandler,AuthorityHandler,ChannelManager单元测试
	- 晁佳欢 > 设计数据库模块单元测试以及服务器端的LimiterHandler和LoggerHandler单元测试
	- 谭靖儒 > 前后端交互（定义一系列监听Event，进行前后端解耦）
	- 马致远 > 集成测试
	- 林昌盛 > 前后端交互（UI完成，后端接口及EventBus机制）
	

#### 单元测试
- 配置模块测试
- 数据库模块测试
- 测试Server的handler的单元测试

详情见[测试文档](https://github.com/tztztztztz/bookish-meme/tree/master/doc/test)

#### 集成测试
对Client与Server之间的交互流程进行直接的测试

#### 前后端交互

主要使用EventBus来解耦

### 第五次讨论
- 时间: 3月29日 16:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: apple club
- 讨论内容
	- [重构Message](#重构Message)
	- [客户端单元测试](#客户端单元测试)
	- [前后端交互](#前后端交互)
	- [功能测试](#功能测试)
	- [应用者复用](#应用者复用)

#### 重构Message
受http协议的启发，重构Message类，便于Json的解析

#### 客户端单元测试
测试Client的handler的单元测试

详情见[测试文档](https://github.com/tztztztztz/bookish-meme/tree/master/doc/test)

#### 前后端交互
前后端交互成功

#### 功能测试 
对产品功能进行测试以验证是否满足需求

#### 应用者复用
冗余检查、标识可复用构建

### 第六次讨论
- 时间: 3月31日 20:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: apple club
- 讨论内容
	- [分析可复用构件](#分析可复用构件)
	- [任务分配6](#任务分配6)

#### 分析可复用构件
1. 目前分析了CM(配置管理)模块,License(rateLimiter模块)和日志模块可复用构件的开发，已经完成了rateLimiter部分的可复用构件开发以及进一步的基于netty框架下的rateLimiterHandler可复用构件的开发，并以此作为后续可复用构件开发的思想基础。
2. 分析了CM可复用构件所需要实现的一般功能以及要考虑的问题
	- 读取配置文件
	- 配置构件可能需要一些相关的配置（例如忽略大小写等）
	- 根据键来读取值
3. 分析了日志模块可复用构件需要实现的一般功能以及要考虑的问题
	- 日志位置
	- 日志内容
4. 总结来说，我们在实现可复用构件时所遵循的一个重要的原则是：试着本脱离项目，开发出一般性的可被别的项目复用的构件，不是把思维限定在本项目如何完成上，而是将该项目作为一个利用我们构建出的可复用构件实现的一个具体的实例。

#### 任务分配6
本阶段任务是首先思考一下复用什么，如何复用，理清思路后在进行可复用构件的开发，保证可复用构件的高可复用性。

### 第七次讨论
- 时间: 4月6日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [完成可复用构件开发](#完成可复用构件开发)
	- [任务分配7](#任务分配7)

#### 完成可复用构件开发

完成CM,PM和LICENSE可复用构件代码和文档的开发

#### 任务分配7
	- 黄安娜 > CM构件
	- 晁佳欢 > CM构件
	- 谭靖儒 > LICENSE构件
	- 马致远 > PM构件

### 第八次讨论
- 时间: 4月10日 20:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: apple club
- 讨论内容
	- [可复用构件发布](#可复用构件发布地址)
	- [选择可复用构件](#选择可复用构件)

#### 可复用构件发布地址
- PM <https://github.com/bookish-component/PM>
- CM <https://github.com/bookish-component/CM>
- LICENSE <https://github.com/bookish-component/License>

#### 选择可复用构件

- CM: [Team5](https://github.com/SummerWish/Tahiti)
- PM: [Team5](https://github.com/SummerWish/Tahiti)
- LICENSE: [Team2](https://github.com/Gavin96/SoftwareReuse)

### 第九次讨论
- 时间: 4月13日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [重构应用程序](#重构应用程序)
	- [构建改进意见](#构件改进意见)

#### 重构应用程序
- CM构件:黄安娜、晁佳欢
- PM构件:谭靖儒
- LICENSE构件:马致远

#### 构建改进意见
- CM构件:黄安娜、晁佳欢
- PM构件:谭靖儒
- LICENSE构件:马致远

### 第十次讨论
- 时间: 4月20日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [功能扩展](#功能扩展)

#### 功能扩展
- Server/Client保存所有收到的消息到文件
	- 文件格式不限
	- 文件路径可配置

- 每天所有的输出文件(Server/Client/PM)归档成一个压缩包
	- 压缩格式不限
	- 压缩包路径可配置

### 第十一次讨论
- 时间: 4月27日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [功能扩展2](#功能扩展2)
	- [任务分配11](#任务分配11)
	
#### 功能扩展
- 配置同组成员，并只向同组成员广播消息

- 将每周的7个归档文件，重新生成一个压缩包

#### 任务分配11
- 配置同组成员:黄安娜、晁佳欢
- 归档文件:马致远、谭靖儒

### 第十二次讨论
- 时间: 5月04日 15:00
- 参与人员：谭靖儒 晁佳欢 黄安娜 林昌盛 马致远
- 地点: 济事楼430
- 讨论内容
	- [功能扩展3](#功能扩展3)
	- [任务分配12](#任务分配12)
	
#### 功能扩展3

1. 输出文件控制
	- 时间
	- 文件大小控制
	- 总文件大小限制
	- 参数可配置

2. 归档文件加密

#### 任务分配12
- 输出文件控制:马致远、谭靖儒
- 归档文件加密:黄安娜、晁佳欢

## 项目总结
- 收获
	1. 本次项目是一个协同开发的项目，我们小组首先共同讨论分析了项目需求，识别出该项目是一个类似于多人聊天室的网络应用程序，因此采用ne		tty框架，并同时制定了明确的项目计划，确定开发环境，并确立小组例会制度。
	2. 同时，在进行需求分析时，我们不仅仅局限于现阶段的需求，更考虑到这是一个迭代开发的过程，因此为了后续功能的良好扩展，我们同时考虑		了许多诸如heartbeat等的问题，全局地进行架构和数据结构设计。
	3. 由于提前制定了明确的项目计划，并且严格地按计划实施，按时开项目组会议评审上一阶段任务并确定下一阶段任务，出现bug及时调试解决，
	我们整个项目过程进展顺利，小组成员合作愉快，我们从小组协作中相互学习，受益颇深。
	4. 通过具体的项目实践，我们能够复用已有类库，并进行解耦构建自己的可复用构件
- 优点
	1. 各模块间尽可能解耦，确保低耦合
	2. 使用javafx而不是java swing来进行界面设计，使得界面更友好
	3. 组内分工明确、各司其职
- 后续改进
	1. 用户注册部分目前还未设计，后续进行补充
	2. ChannelManager部分需要先检查用户是否已经登陆，再决定是否将其所在channel加入Manager.channels中进行管理

## 项目完成情况
项目按照项目计划已经顺利完成本阶段任务，实现了目前所确定的需求。已完成的功能有：
- 用户登陆
	- 登陆成功：进入发消息界面，可以发送消息
	- 登陆失败：弹出警告框
- 发送消息
	- 用户每次登陆发送消息数不能超过100(可配置)条
	- 用户每秒发送消息数不能超过5(可配置)条
	- 成功发送消息时则转发给连接的所有用户
- 打印日志
- 友好的用户界面
- 单元测试以及集成测试均测试通过

待完成：注册功能





